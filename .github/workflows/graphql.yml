name: Graphql

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  args-query:
    runs-on: ubuntu-latest
    steps:
      - name: Generate Test Coverage
        shell: bash
        run: |-
             git config --global http.version HTTP/1.1
             curl -X POST https://devopsprodemo.atlassian.net/gateway/api/graphql \
             -H "content-type : application/json" \
             -d '{"operationName": "useAddGenericLinkRelatedWork_addRelatedWorkMutation",
                  "query": "mutation useAddGenericLinkRelatedWork_addRelatedWorkMutation($input:JiraAddRelatedWorkToVersionInput!,$isRelatedWorkAssigneesEnabled:Boolean!){jira{addRelatedWorkToVersion(input:$input){success,relatedWorkV2Edge{...categoryFilter_softwareReleasesVersionRelatedWork,...async_softwareReleasesAddRelatedWorkToVersion_AddRelatedWorkPopup_relatedWorkEdges,...relatedWorkList_softwareReleasesVersionRelatedWork_relatedWorkEdges,...addRelatedWorkPopup_softwareReleasesAddRelatedWorkToVersion_relatedWorkEdges,...emptyState_softwareReleasesVersionRelatedWork_RelatedWorkEmptyState_relatedWorkEdges},errors{message}}}}fragment addRelatedWorkPopup_softwareReleasesAddRelatedWorkToVersion_relatedWorkEdges on JiraVersionRelatedWorkV2Edge{__typename}fragment async_softwareReleasesAddRelatedWorkToVersion_AddRelatedWorkPopup_relatedWorkEdges on JiraVersionRelatedWorkV2Edge{...addRelatedWorkPopup_softwareReleasesAddRelatedWorkToVersion_relatedWorkEdges}fragment async_softwareReleasesAddRelatedWorkToVersion_EditRelatedWorkPopup_jiraVersionRelatedWork on JiraVersionRelatedWorkGenericLink{...editRelatedWorkPopup_softwareReleasesAddRelatedWorkToVersion_jiraVersionRelatedWork}fragment categoryFilter_softwareReleasesVersionRelatedWork on JiraVersionRelatedWorkV2Edge{node{__typename,category}}fragment createIssueButton_softwareReleasesVersionRelatedWorkItem_AsyncCreateIssueButton_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,...createIssueMain_softwareReleasesVersionRelatedWorkItem_CreateIssueButton_jiraVersionRelatedWork}fragment createIssueMain_softwareReleasesVersionRelatedWorkItem_CreateIssueButton_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,...on JiraVersionRelatedWorkGenericLink{relatedWorkId,title},...on JiraVersionRelatedWorkConfluenceReleaseNotes{relatedWorkId,title},...on JiraVersionRelatedWorkNativeReleaseNotes{__typename,title}}fragment deleteButton_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,...deleteModal_softwareReleasesAddRelatedWorkToVersion_DeleteRelatedWorkItemModal_jiraVersionRelatedWork}fragment deleteModal_softwareReleasesAddRelatedWorkToVersion_DeleteRelatedWorkItemModal_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,...on JiraVersionRelatedWorkGenericLink{relatedWorkId},...on JiraVersionRelatedWorkConfluenceReleaseNotes{relatedWorkId}}fragment editItemPopup_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkGenericLink{...async_softwareReleasesAddRelatedWorkToVersion_EditRelatedWorkPopup_jiraVersionRelatedWork}fragment editRelatedWorkForm_softwareReleasesAddRelatedWorkToVersion_jiraVersionRelatedWork on JiraVersionRelatedWorkGenericLink{relatedWorkId,category,title,url}fragment editRelatedWorkPopup_softwareReleasesAddRelatedWorkToVersion_jiraVersionRelatedWork on JiraVersionRelatedWorkGenericLink{url,...deleteModal_softwareReleasesAddRelatedWorkToVersion_DeleteRelatedWorkItemModal_jiraVersionRelatedWork,...editRelatedWorkForm_softwareReleasesAddRelatedWorkToVersion_jiraVersionRelatedWork}fragment emptyState_softwareReleasesVersionRelatedWork_RelatedWorkEmptyState_relatedWorkEdges on JiraVersionRelatedWorkV2Edge{...async_softwareReleasesAddRelatedWorkToVersion_AddRelatedWorkPopup_relatedWorkEdges}fragment linkIssueButton_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,...on JiraVersionRelatedWorkGenericLink{relatedWorkId},...on JiraVersionRelatedWorkConfluenceReleaseNotes{relatedWorkId},...on JiraVersionRelatedWorkNativeReleaseNotes{__typename}}fragment linkedIssue_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,...on JiraVersionRelatedWorkGenericLink{relatedWorkId},...on JiraVersionRelatedWorkConfluenceReleaseNotes{relatedWorkId},issue{key,fieldsById(ids:[\"assignee\",\"status\"]){edges{node{__typename,...on JiraStatusField{fieldId,status{name,statusCategory{statusCategoryId,id},id}},...on JiraSingleSelectUserPickerField{fieldId,user{__typename,picture,name,id}},id}}},id}}fragment relatedWorkConfluenceReleaseNotes_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkConfluenceReleaseNotes{...relatedWorkItem_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork,relatedWorkId,url,title}fragment relatedWorkGenericLink_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkGenericLink{relatedWorkId,url,title,...relatedWorkItem_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork}fragment relatedWorkItem_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,issue@include(if:$isRelatedWorkAssigneesEnabled){__typename,id}\n  ...createIssueButton_softwareReleasesVersionRelatedWorkItem_AsyncCreateIssueButton_jiraVersionRelatedWork@include(if:$isRelatedWorkAssigneesEnabled)\n  ...linkIssueButton_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork@include(if:$isRelatedWorkAssigneesEnabled)\n  ...linkedIssue_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork@include(if:$isRelatedWorkAssigneesEnabled),...on JiraVersionRelatedWorkGenericLink{url},...deleteButton_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork,...editItemPopup_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork}fragment relatedWorkList_softwareReleasesVersionRelatedWork_relatedWorkEdges on JiraVersionRelatedWorkV2Edge{node{__typename,...ui_softwareReleasesVersionRelatedWorkItem_RelatedWorkItem_jiraVersionRelatedWork}}fragment relatedWorkNativeReleaseNotes_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkNativeReleaseNotes{title,...relatedWorkItem_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork}fragment relatedWorkPlaceholder_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkGenericLink{title,category,...async_softwareReleasesAddRelatedWorkToVersion_EditRelatedWorkPopup_jiraVersionRelatedWork,...relatedWorkItem_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork}fragment ui_softwareReleasesVersionRelatedWorkItem_RelatedWorkItem_jiraVersionRelatedWork on JiraVersionRelatedWorkV2{__isJiraVersionRelatedWorkV2:__typename,__typename,...on JiraVersionRelatedWorkGenericLink{url,...relatedWorkGenericLink_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork,...relatedWorkPlaceholder_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork},...on JiraVersionRelatedWorkConfluenceReleaseNotes{...relatedWorkConfluenceReleaseNotes_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork},...on JiraVersionRelatedWorkNativeReleaseNotes{...relatedWorkNativeReleaseNotes_softwareReleasesVersionRelatedWorkItem_jiraVersionRelatedWork}}",
                   "variables": {
                   "connections": [
                   "client:ari:cloud:jira:37570433-08ae-464a-b8c0-9d28c52f048a:version/activation/6c468cdf-3fb8-4dae-a543-ead783a4d810/10000:::::SmlyYVZlcnNpb24=:__version_relatedWorkV2_connection"
                    ],
              "input": {
              "versionId": "ari:cloud:jira:37570433-08ae-464a-b8c0-9d28c52f048a:version/activation/6c468cdf-3fb8-4dae-a543-ead783a4d810/10000",
              "relatedWorkId": "dde3d6ef-360b-4f97-a547-098ec319fc05",
              "url": null,
             "title": "Add test report",
             "category": "Testing"
             },
             }
             }'

    


  
